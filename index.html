<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=yes">
    <title>Antonella, ¬øquieres ser mi San Valent√≠n? üíñ</title>
    <!-- Fuentes premium -->
    <link href="https://fonts.googleapis.com/css2?family=SF+Pro+Display:wght@200;300;400;600;700;800;900&family=Mrs+Saint+Delafield&family=Crimson+Pro:wght@200;300;400;600;800&display=swap" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --primary: #ff2d55;
            --secondary: #ff375f;
            --accent: #ffcc00;
            --text: #1d1d1f;
            --text-light: #86868b;
            --bg: #000000;
        }

        body {
            font-family: 'SF Pro Display', -apple-system, BlinkMacSystemFont, sans-serif;
            background: var(--bg);
            color: #fff;
            overflow-x: hidden;
            -webkit-font-smoothing: antialiased;
            scroll-behavior: smooth;
        }

        /* Scrollbar elegante */
        ::-webkit-scrollbar { width: 8px; }
        ::-webkit-scrollbar-track { background: rgba(255, 255, 255, 0.05); }
        ::-webkit-scrollbar-thumb { background: var(--primary); border-radius: 10px; }

        /* START SCREEN para activar audio */
        .start-screen {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: #000;
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 10000;
            opacity: 1;
            transition: opacity 1s ease;
        }

        .start-screen.hidden {
            opacity: 0;
            pointer-events: none;
        }

        .start-content {
            text-align: center;
        }

        .start-title {
            font-family: 'Mrs Saint Delafield', cursive;
            font-size: clamp(4rem, 12vw, 8rem);
            background: linear-gradient(135deg, #ff2d55, #ff6b9d, #ffcc00);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            margin-bottom: 30px;
            animation: pulse 2s ease-in-out infinite;
        }

        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }

        .start-subtitle {
            font-size: clamp(1.2rem, 3vw, 1.8rem);
            color: rgba(255, 255, 255, 0.7);
            margin-bottom: 50px;
        }

        .start-button {
            background: var(--primary);
            color: white;
            border: none;
            padding: 20px 50px;
            font-size: 1.5rem;
            border-radius: 980px;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 20px 50px rgba(255, 45, 85, 0.4);
            font-family: 'SF Pro Display', sans-serif;
            font-weight: 600;
        }

        .start-button:hover {
            transform: translateY(-3px);
            box-shadow: 0 30px 70px rgba(255, 45, 85, 0.6);
        }

        .start-button:active {
            transform: translateY(0);
        }

        /* Control de m√∫sica */
        .music-control {
            position: fixed;
            bottom: 30px;
            right: 30px;
            z-index: 9999;
            background: rgba(255, 45, 85, 0.9);
            border: none;
            width: 60px;
            height: 60px;
            border-radius: 50%;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 24px;
            box-shadow: 0 10px 30px rgba(255, 45, 85, 0.4);
            transition: all 0.3s ease;
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
        }

        .music-control:hover {
            transform: scale(1.1);
            box-shadow: 0 15px 40px rgba(255, 45, 85, 0.6);
        }

        /* Hero Section */
        .hero-section {
            height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            position: relative;
            overflow: hidden;
        }

        .hero-content {
            text-align: center;
            z-index: 10;
            position: relative;
        }

        .hero-title {
            font-family: 'Mrs Saint Delafield', cursive;
            font-size: clamp(6rem, 20vw, 15rem);
            font-weight: 400;
            background: linear-gradient(135deg, #ff2d55, #ff6b9d, #ffcc00);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            margin-bottom: 20px;
            opacity: 0;
            transform: translateY(50px);
            animation: fadeInUp 1.2s ease forwards 0.3s;
        }

        .hero-subtitle {
            font-size: clamp(1.5rem, 3vw, 2.5rem);
            font-weight: 300;
            color: rgba(255, 255, 255, 0.8);
            letter-spacing: 0.02em;
            opacity: 0;
            transform: translateY(30px);
            animation: fadeInUp 1.2s ease forwards 0.6s;
        }

        @keyframes fadeInUp {
            to { opacity: 1; transform: translateY(0); }
        }

        .scroll-down {
            position: absolute;
            bottom: 40px;
            left: 50%;
            transform: translateX(-50%);
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 10px;
            opacity: 0;
            animation: fadeInUp 1.2s ease forwards 1s, bounce 2s infinite 2s;
        }

        .scroll-down span {
            font-size: 0.9rem;
            text-transform: uppercase;
            letter-spacing: 0.15em;
            color: rgba(255, 255, 255, 0.6);
        }

        .scroll-line {
            width: 1px;
            height: 60px;
            background: linear-gradient(to bottom, var(--primary), transparent);
        }

        @keyframes bounce {
            0%, 100% { transform: translateX(-50%) translateY(0); }
            50% { transform: translateX(-50%) translateY(10px); }
        }

        /* Scroll Section - OPTIMIZADO PARA M√ìVIL */
        .scroll-section {
            height: 500vh; /* Reducido para mejor performance */
            position: relative;
        }

        .sticky-container {
            position: sticky;
            top: 0;
            height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            overflow: hidden;
        }

        .photos-container {
            position: relative;
            width: 100%;
            height: 100%;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .floating-photo {
            position: absolute;
            max-width: 350px;
            width: 35vw;
            opacity: 0;
            transform: scale(0.9);
            transition: opacity 0.6s ease, transform 0.6s ease; /* Simplificado */
            will-change: opacity; /* Solo opacity para mejor performance */
            filter: drop-shadow(0 20px 50px rgba(255, 45, 85, 0.3));
        }

        .floating-photo img {
            width: 100%;
            height: auto;
            display: block;
            border-radius: 20px;
            pointer-events: none;
        }

        .floating-photo.active {
            opacity: 1;
            transform: scale(1);
        }

        /* Posiciones optimizadas */
        .floating-photo:nth-child(1) { left: 10%; top: 15%; }
        .floating-photo:nth-child(2) { right: 15%; top: 20%; }
        .floating-photo:nth-child(3) { left: 15%; bottom: 20%; }
        .floating-photo:nth-child(4) { right: 10%; bottom: 15%; }
        .floating-photo:nth-child(5) { left: 50%; top: 10%; transform: translateX(-50%) scale(0.9); }
        .floating-photo:nth-child(6) { left: 25%; top: 50%; transform: translateY(-50%) scale(0.9); }
        .floating-photo:nth-child(7) { right: 25%; top: 50%; transform: translateY(-50%) scale(0.9); }
        .floating-photo:nth-child(8) { left: 50%; bottom: 10%; transform: translateX(-50%) scale(0.9); }
        .floating-photo:nth-child(9) { left: 50%; top: 50%; transform: translate(-50%, -50%) scale(0.9); }

        /* Texto central */
        .scroll-text-overlay {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            text-align: center;
            z-index: 100;
            pointer-events: none;
            width: 90%;
            max-width: 900px;
        }

        .scroll-title {
            font-size: clamp(2.5rem, 7vw, 6rem);
            font-weight: 700;
            line-height: 1.1;
            background: linear-gradient(135deg, #ffffff, #ff6b9d);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            margin-bottom: 20px;
            opacity: 0;
            transition: opacity 0.5s ease;
        }

        .scroll-title.visible {
            opacity: 1;
        }

        .scroll-description {
            font-size: clamp(1rem, 2vw, 1.5rem);
            font-weight: 300;
            color: rgba(255, 255, 255, 0.8);
            line-height: 1.6;
            opacity: 0;
            transition: opacity 0.5s ease 0.1s;
        }

        .scroll-description.visible {
            opacity: 1;
        }

        /* Carta de amor */
        .letter-section {
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 100px 20px;
            background: linear-gradient(180deg, #000 0%, #0a0a0a 100%);
        }

        .letter-container {
            max-width: 900px;
            width: 100%;
            background: rgba(255, 255, 255, 0.03);
            border: 1px solid rgba(255, 255, 255, 0.08);
            border-radius: 24px;
            padding: 80px 60px;
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
            position: relative;
        }

        .letter-title {
            font-family: 'Mrs Saint Delafield', cursive;
            font-size: clamp(3.5rem, 7vw, 6rem);
            background: linear-gradient(135deg, var(--primary), #ff6b9d);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            margin-bottom: 50px;
            text-align: center;
        }

        .letter-text {
            font-family: 'Crimson Pro', serif;
            font-size: clamp(1.2rem, 2vw, 1.6rem);
            line-height: 1.8;
            color: rgba(255, 255, 255, 0.9);
            margin-bottom: 30px;
            font-weight: 300;
        }

        .letter-text strong {
            color: var(--secondary);
            font-weight: 600;
        }

        .letter-signature {
            font-family: 'Mrs Saint Delafield', cursive;
            font-size: 3rem;
            color: var(--primary);
            text-align: right;
            margin-top: 60px;
        }

        /* Secci√≥n de la pregunta */
        .question-section {
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 100px 20px;
            background: radial-gradient(ellipse at center, rgba(255, 45, 85, 0.1) 0%, transparent 70%);
            position: relative;
        }

        .question-content {
            text-align: center;
            max-width: 1000px;
        }

        .big-question {
            font-size: clamp(3rem, 9vw, 7rem);
            font-weight: 800;
            line-height: 1.1;
            background: linear-gradient(135deg, #ff2d55, #ff6b9d, #ffcc00);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            margin-bottom: 30px;
            animation: heartbeat 1.8s ease-in-out infinite;
        }

        @keyframes heartbeat {
            0%, 100% { transform: scale(1); }
            10% { transform: scale(0.98); }
            20% { transform: scale(1.03); }
            30% { transform: scale(0.98); }
            40% { transform: scale(1); }
        }

        .question-subtitle {
            font-size: clamp(1.2rem, 2.5vw, 2rem);
            font-weight: 300;
            color: rgba(255, 255, 255, 0.7);
            margin-bottom: 80px;
            letter-spacing: 0.02em;
        }

        .buttons-container {
            display: flex;
            gap: 30px;
            justify-content: center;
            flex-wrap: wrap;
        }

        .answer-button {
            font-size: clamp(1.2rem, 2vw, 1.7rem);
            font-weight: 600;
            padding: 22px 60px;
            border: none;
            border-radius: 980px;
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
            letter-spacing: 0.01em;
            -webkit-tap-highlight-color: transparent;
        }

        .yes-button {
            background: var(--primary);
            color: white;
            box-shadow: 0 20px 50px rgba(255, 45, 85, 0.4);
        }

        .yes-button:active {
            transform: scale(0.95);
        }

        .no-button {
            background: rgba(255, 255, 255, 0.08);
            color: rgba(255, 255, 255, 0.5);
            border: 1px solid rgba(255, 255, 255, 0.1);
            transition: all 0.2s ease;
        }

        /* Celebration Section */
        .celebration-section {
            display: none;
            min-height: 100vh;
            align-items: center;
            justify-content: center;
            padding: 100px 20px;
            text-align: center;
            position: relative;
            overflow: hidden;
        }

        .celebration-section.active {
            display: flex;
        }

        .celebration-content {
            position: relative;
            z-index: 10;
        }

        .celebration-title {
            font-size: clamp(4rem, 13vw, 11rem);
            font-weight: 900;
            background: linear-gradient(135deg, #ff2d55, #ffcc00, #ff6b9d);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            margin-bottom: 40px;
            animation: celebration-appear 1.5s ease;
        }

        @keyframes celebration-appear {
            0% { transform: scale(0.5); opacity: 0; }
            100% { transform: scale(1); opacity: 1; }
        }

        .celebration-text {
            font-size: clamp(1.6rem, 4vw, 2.8rem);
            font-weight: 300;
            color: rgba(255, 255, 255, 0.9);
            margin-bottom: 30px;
        }

        .celebration-love {
            font-family: 'Mrs Saint Delafield', cursive;
            font-size: clamp(2.2rem, 5vw, 3.8rem);
            color: var(--primary);
            margin: 40px 0 60px;
        }

        .final-photo {
            max-width: 600px;
            width: 90%;
            margin: 0 auto;
            position: relative;
            animation: zoomIn 1.2s ease;
        }

        @keyframes zoomIn {
            0% { transform: scale(0.7); opacity: 0; }
            100% { transform: scale(1); opacity: 1; }
        }

        .final-photo img {
            width: 100%;
            border-radius: 24px;
            box-shadow: 0 30px 80px rgba(255, 45, 85, 0.4);
        }

        /* Part√≠culas - REDUCIDAS PARA M√ìVIL */
        .particle {
            position: fixed;
            width: 6px;
            height: 6px;
            background: var(--primary);
            border-radius: 50%;
            pointer-events: none;
            opacity: 0;
            z-index: 9999;
        }

        /* Responsive */
        @media (max-width: 768px) {
            .floating-photo {
                max-width: 250px;
                width: 65vw;
            }

            .floating-photo:nth-child(1) { left: 5%; top: 12%; }
            .floating-photo:nth-child(2) { right: 5%; top: 18%; }
            .floating-photo:nth-child(3) { left: 8%; bottom: 18%; }
            .floating-photo:nth-child(4) { right: 8%; bottom: 22%; }
            
            .letter-container {
                padding: 50px 30px;
            }

            .buttons-container {
                flex-direction: column;
                width: 100%;
            }

            .answer-button {
                width: 100%;
                padding: 18px 30px;
            }

            .scroll-section {
                height: 400vh; /* A√∫n m√°s reducido en m√≥vil */
            }

            .music-control {
                width: 50px;
                height: 50px;
                font-size: 20px;
                bottom: 20px;
                right: 20px;
            }

            /* Desactivar corazones flotantes en m√≥vil */
            .floating-hearts {
                display: none;
            }
        }

        /* Smooth reveal animations */
        .reveal {
            opacity: 0;
            transform: translateY(30px);
            transition: all 0.8s ease;
        }

        .reveal.active {
            opacity: 1;
            transform: translateY(0);
        }
    </style>
</head>
<body>

    <!-- Pantalla de inicio -->
    <div class="start-screen" id="startScreen">
        <div class="start-content">
            <h1 class="start-title">Para Antonella üíñ</h1>
            <p class="start-subtitle">Toca para comenzar la experiencia</p>
            <button class="start-button" id="startButton">Comenzar ‚ú®</button>
        </div>
    </div>

    <!-- Control de m√∫sica -->
    <button class="music-control" id="musicControl" title="Pausar m√∫sica">
        üéµ
    </button>

    <!-- Audio de fondo -->
    <audio id="bgMusic" loop preload="auto">
        <source src="crayola-danny ocean.mp3" type="audio/mpeg">
    </audio>

    <!-- Hero Section -->
    <section class="hero-section">
        <div class="hero-content">
            <h1 class="hero-title">Antonella</h1>
            <p class="hero-subtitle">Un viaje a trav√©s de nuestro amor</p>
        </div>
        <div class="scroll-down">
            <span>Despl√°zate</span>
            <div class="scroll-line"></div>
        </div>
    </section>

    <!-- Scroll Section -->
    <section class="scroll-section">
        <div class="sticky-container">
            <div class="photos-container" id="photosContainer">
                <div class="floating-photo"><img src="1.webp" alt="Nosotros 1" loading="lazy"></div>
                <div class="floating-photo"><img src="2.webp" alt="Nosotros 2" loading="lazy"></div>
                <div class="floating-photo"><img src="3.webp" alt="Nosotros 3" loading="lazy"></div>
                <div class="floating-photo"><img src="4.webp" alt="Nosotros 4" loading="lazy"></div>
                <div class="floating-photo"><img src="5.webp" alt="Nosotros 5" loading="lazy"></div>
                <div class="floating-photo"><img src="6.webp" alt="Nosotros 6" loading="lazy"></div>
                <div class="floating-photo"><img src="7.webp" alt="Nosotros 7" loading="lazy"></div>
                <div class="floating-photo"><img src="8.webp" alt="Nosotros 8" loading="lazy"></div>
                <div class="floating-photo"><img src="9.webp" alt="Nosotros 9" loading="lazy"></div>
                <div class="floating-photo"><img src="10.webp" alt="Nosotros 10" loading="lazy"></div>
                <div class="floating-photo"><img src="11.webp" alt="Nosotros 11" loading="lazy"></div>

                <div class="scroll-text-overlay">
                    <h2 class="scroll-title" id="scrollTitle">Nuestros Momentos</h2>
                    <p class="scroll-description" id="scrollDesc">Cada fotograf√≠a cuenta una historia de amor, risas y momentos inolvidables juntos</p>
                </div>
            </div>
        </div>
    </section>

    <!-- Carta de amor -->
    <section class="letter-section reveal">
        <div class="letter-container">
            <h2 class="letter-title">Para ti, mi amor</h2>
            <p class="letter-text">
                <strong>Antonella</strong>, desde que llegaste a mi vida, el mundo tiene m√°s color, m√°s luz y m√°s sentido. 
                Cada d√≠a a tu lado es un regalo que guardo con amor en mi coraz√≥n.
            </p>

            <p class="letter-text">
                Me encanta tu sonrisa, esa que ilumina todo sin esfuerzo. Me encanta tu forma de ser, tan aut√©ntica, 
                tan tuya. Tu risa es la melod√≠a m√°s hermosa que he escuchado, y tu alegr√≠a, mi refugio favorito.
            </p>

            <p class="letter-text">
                Amo cada detalle de ti: tu hoyuelo en una de tus mejillas, tus lunares, incluso ese lunar en tu pierna 
                derecha que conozco tan bien. Me encanta el olor de tu piel, el sabor de tus besos y la paz que siento 
                cuando te tengo cerca.
            </p>

            <p class="letter-text">
                Contigo he aprendido lo que significa <strong>amar de verdad</strong>. Amar tu cuerpo, tu alma, tus sue√±os 
                y tu esencia. Despertar cada ma√±ana sabiendo que eres m√≠a y so√±ar con un futuro lleno de momentos 
                incre√≠bles a tu lado.
            </p>

            <p class="letter-text">
                Eres mi mejor amiga, mi c√≥mplice, mi confidente‚Ä¶ eres <strong>mi todo</strong>. No existe nadie m√°s en este 
                mundo con quien quisiera compartir este San Valent√≠n ni mi vida.
            </p>

            <p class="letter-text">
                Te amo m√°s de lo que las palabras pueden expresar, m√°s de lo que el tiempo puede medir y m√°s de lo que 
                mi coraz√≥n puede contener.
            </p>

            <div class="letter-signature">
                Con todo mi amor, tu amorcito ‚ù§Ô∏è
            </div>
        </div>
    </section>

    <!-- Secci√≥n de la pregunta -->
    <section class="question-section reveal" id="questionSection">
        <div class="question-content">
            <h1 class="big-question">¬øQuieres ser mi San Valent√≠n?</h1>
            <p class="question-subtitle">Anto, hazme el hombre m√°s feliz del mundo...</p>
            <div class="buttons-container">
                <button class="answer-button yes-button" onclick="celebrate()">
                    ¬°S√≠, mi amor! üíï
                </button>
                <button class="answer-button no-button" id="noBtn">
                    No...
                </button>
            </div>
        </div>
    </section>

    <!-- Secci√≥n de celebraci√≥n -->
    <section class="celebration-section" id="celebrationSection">
        <div class="celebration-content">
            <h1 class="celebration-title">¬°S√ç√ç√ç√ç√ç! üéâ‚ú®</h1>
            <p class="celebration-text">¬°Eres mi San Valent√≠n perfecto!</p>
            <p class="celebration-love">Loviu mi bb, princesa, mu√±eca, princesa: Antonella</p>
            <div class="final-photo">
                <img src="12.jpg" alt="Nosotros felices" loading="lazy">
            </div>
        </div>
    </section>

    <script>
        (function() {
            'use strict';
            
            // Detecci√≥n de m√≥vil
            const isMobile = /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);
            
            // ============================================
            // AUDIO CONTROL
            // ============================================
            const startScreen = document.getElementById('startScreen');
            const startButton = document.getElementById('startButton');
            const bgMusic = document.getElementById('bgMusic');
            const musicControl = document.getElementById('musicControl');
            let isPlaying = false;

            startButton.addEventListener('click', () => {
                startScreen.classList.add('hidden');
                bgMusic.play().then(() => {
                    isPlaying = true;
                }).catch(e => console.log('Audio play failed:', e));
            });

            musicControl.addEventListener('click', () => {
                if (isPlaying) {
                    bgMusic.pause();
                    musicControl.textContent = 'üîá';
                    musicControl.title = 'Reproducir m√∫sica';
                } else {
                    bgMusic.play();
                    musicControl.textContent = 'üéµ';
                    musicControl.title = 'Pausar m√∫sica';
                }
                isPlaying = !isPlaying;
            });

            // ============================================
            // SCROLL ANIMATION - OPTIMIZADO
            // ============================================
            const scrollSection = document.querySelector('.scroll-section');
            const photos = document.querySelectorAll('.floating-photo');
            const scrollTitle = document.getElementById('scrollTitle');
            const scrollDesc = document.getElementById('scrollDesc');

            const messages = [
                { title: "Donde Todo Comenz√≥", desc: "El primer momento que cambi√≥ mi vida" },
                { title: "Nuestras Aventuras", desc: "Cada viaje contigo es especial" },
                { title: "Tu Sonrisa", desc: "La raz√≥n de mi felicidad" },
                { title: "Momentos Perfectos", desc: "Contigo todo es extraordinario" },
                { title: "Juntos Siempre", desc: "Nuestra familia que amo" },
                { title: "Tu Mirada", desc: "Mi hogar, mi paz, mi todo" },
                { title: "Amor Infinito", desc: "Lo que siento por ti" },
                { title: "Nuestra Historia", desc: "Cada d√≠a m√°s hermosa" },
                { title: "T√∫ y Yo", desc: "La combinaci√≥n perfecta" }
            ];

            // Throttle para mejor performance
            let ticking = false;
            
            function updateScroll() {
                const scrollSectionTop = scrollSection.offsetTop;
                const scrollSectionHeight = scrollSection.offsetHeight;
                const scrollProgress = (window.scrollY - scrollSectionTop) / (scrollSectionHeight - window.innerHeight);

                if (scrollProgress >= 0 && scrollProgress <= 1) {
                    const totalPhotos = photos.length;
                    const photoIndex = Math.floor(scrollProgress * totalPhotos);

                    photos.forEach((photo, index) => {
                        if (index === photoIndex) {
                            photo.classList.add('active');
                            if (messages[index]) {
                                scrollTitle.textContent = messages[index].title;
                                scrollDesc.textContent = messages[index].desc;
                                scrollTitle.classList.add('visible');
                                scrollDesc.classList.add('visible');
                            }
                        } else {
                            photo.classList.remove('active');
                        }
                    });
                }
                
                ticking = false;
            }

            window.addEventListener('scroll', () => {
                if (!ticking) {
                    window.requestAnimationFrame(updateScroll);
                    ticking = true;
                }
            }, { passive: true });

            // ============================================
            // REVEAL ANIMATIONS
            // ============================================
            const reveals = document.querySelectorAll('.reveal');
            const revealObserver = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        entry.target.classList.add('active');
                    }
                });
            }, { threshold: 0.15, rootMargin: '0px 0px -50px 0px' });

            reveals.forEach(reveal => revealObserver.observe(reveal));

            // ============================================
            // BOT√ìN "NO" TRAVIESO
            // ============================================
            const noBtn = document.getElementById('noBtn');
            let noClickCount = 0;
            const noMessages = [
                '¬øSegura? ü•∫',
                'Pi√©nsalo bien... üíî',
                '¬°Por favor! üò¢',
                '¬øDe verdad? üò≠',
                '¬°No me hagas esto! ü•π',
                '¬°√öltima oportunidad! üíï',
                '¬°Corro! üèÉ'
            ];

            function moveNoButton() {
                if (noClickCount < 3) {
                    noBtn.textContent = noMessages[noClickCount];
                    noClickCount++;
                } else {
                    if (noClickCount < noMessages.length) {
                        noBtn.textContent = noMessages[noClickCount];
                        noClickCount++;
                    }

                    if (isMobile) {
                        const container = document.querySelector('.buttons-container');
                        const maxX = container.clientWidth - noBtn.offsetWidth - 20;
                        const randomX = Math.max(0, Math.min(maxX, Math.random() * maxX));
                        
                        noBtn.style.position = 'relative';
                        noBtn.style.left = randomX + 'px';
                        noBtn.style.transition = 'all 0.3s ease';
                    } else {
                        const maxX = window.innerWidth - noBtn.offsetWidth - 100;
                        const maxY = window.innerHeight - noBtn.offsetHeight - 100;
                        const randomX = Math.random() * maxX + 50;
                        const randomY = Math.random() * maxY + 50;
                        
                        noBtn.style.position = 'fixed';
                        noBtn.style.left = randomX + 'px';
                        noBtn.style.top = randomY + 'px';
                        noBtn.style.transition = 'all 0.3s ease';
                    }
                }
            }

            noBtn.addEventListener('click', moveNoButton);
            noBtn.addEventListener('touchstart', (e) => {
                e.preventDefault();
                moveNoButton();
            }, { passive: false });

            // ============================================
            // CELEBRACI√ìN - OPTIMIZADA
            // ============================================
            window.celebrate = function() {
                document.getElementById('questionSection').style.display = 'none';
                document.getElementById('celebrationSection').classList.add('active');
                
                setTimeout(() => {
                    window.scrollTo({
                        top: document.getElementById('celebrationSection').offsetTop,
                        behavior: 'smooth'
                    });
                }, 100);

                // Confeti reducido en m√≥vil
                const confettiCount = isMobile ? 50 : 100;
                createConfettiExplosion(confettiCount);
            };

            function createConfettiExplosion(count) {
                const colors = ['#ff2d55', '#ff6b9d', '#ffcc00'];
                for (let i = 0; i < count; i++) {
                    setTimeout(() => {
                        const confetti = document.createElement('div');
                        confetti.className = 'particle';
                        confetti.style.background = colors[Math.floor(Math.random() * colors.length)];
                        confetti.style.left = '50%';
                        confetti.style.top = '50%';
                        document.body.appendChild(confetti);

                        const angle = (Math.PI * 2 * i) / count;
                        const velocity = 4 + Math.random() * 6;
                        let x = window.innerWidth / 2;
                        let y = window.innerHeight / 2;
                        let vx = Math.cos(angle) * velocity;
                        let vy = Math.sin(angle) * velocity;

                        function animate() {
                            x += vx;
                            y += vy;
                            vy += 0.25;
                            vx *= 0.98;

                            confetti.style.left = x + 'px';
                            confetti.style.top = y + 'px';
                            confetti.style.opacity = parseFloat(confetti.style.opacity || 1) - 0.015;

                            if (parseFloat(confetti.style.opacity) > 0 && y < window.innerHeight + 100) {
                                requestAnimationFrame(animate);
                            } else {
                                confetti.remove();
                            }
                        }

                        confetti.style.opacity = '1';
                        requestAnimationFrame(animate);
                    }, i * 15);
                }
            }

            // Corazones flotantes solo en desktop
            if (!isMobile) {
                function createFloatingHeart() {
                    const heart = document.createElement('div');
                    heart.textContent = 'üíñ';
                    heart.style.position = 'fixed';
                    heart.style.left = Math.random() * window.innerWidth + 'px';
                    heart.style.top = window.innerHeight + 'px';
                    heart.style.fontSize = (Math.random() * 15 + 15) + 'px';
                    heart.style.opacity = '0';
                    heart.style.pointerEvents = 'none';
                    heart.style.zIndex = '1';
                    document.body.appendChild(heart);

                    let y = window.innerHeight;
                    let x = parseFloat(heart.style.left);

                    function float() {
                        y -= 1.5;
                        x += Math.sin(y * 0.02) * 0.5;
                        
                        heart.style.top = y + 'px';
                        heart.style.left = x + 'px';
                        heart.style.opacity = Math.min(0.5, (window.innerHeight - y) / 200);

                        if (y > -100) {
                            requestAnimationFrame(float);
                        } else {
                            heart.remove();
                        }
                    }

                    requestAnimationFrame(float);
                }

                setInterval(createFloatingHeart, 1200);
            }

        })();
    </script>

</body>
</html>
